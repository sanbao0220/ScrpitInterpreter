{
  "metadata": {
    "name": "自动生成脚本",
    "version": "1.0",
    "description": "由文本脚本自动转换"
  },
  "steps": {
    "welcome": {
      "name": "welcome",
      "actions": [
        {
          "type": "speak",
          "content": "${name}您好，欢迎致电京东客服，请问有什么可以帮您？您可以进行咨询商品售后服务，可以查询订单信息，可以咨询人工客服或者进行投诉"
        },
        {
          "type": "listen",
          "min": 5,
          "max": 20
        }
      ],
      "branch": {
        "订单": "orderProc",
        "退货": "returnProc",
        "换货": "exchangeProc",
        "投诉": "complainProc",
        "人工": "humanProc",
        "意图识别失败": "fail",
        "结束": "exit"
      }
    },
    "middleProc": {
      "name": "middleProc",
      "actions": [
        {
          "type": "speak",
          "content": "您还需要我提供什么服务？您可以说订单、退货、换货、投诉、人工或退出。"
        },
        {
          "type": "listen",
          "min": 5,
          "max": 20
        }
      ],
      "branch": {
        "订单": "orderProc",
        "退货": "returnProc",
        "换货": "exchangeProc",
        "投诉": "complainProc",
        "人工": "humanProc",
        "意图识别失败": "fail",
        "结束": "exit"
      }
    },
    "orderProc": {
      "name": "orderProc",
      "actions": [
        {
          "type": "speak",
          "content": "您的订单号为${order_id}，订单状态：${status}，金额：${price}元。如需退货、换货或投诉，请直接说明。"
        },
        {
          "type": "middle"
        }
      ],
      "branch": {},
      "if": [
        {
          "condition": "$order_id == null",
          "goto": "orderNotFound"
        },
        {
          "condition": "$status == '已退货'",
          "goto": "alreadyRefund"
        },
        {
          "condition": "$status == '已换货'",
          "goto": "alreadyExchanged"
        }
      ]
    },
    "orderNotFound": {
      "name": "orderNotFound",
      "actions": [
        {
          "type": "speak",
          "content": "未查询到您的订单信息，请确认订单号是否正确。"
        },
        {
          "type": "middle"
        }
      ],
      "branch": {}
    },
    "returnProc": {
      "name": "returnProc",
      "actions": [
        {
          "type": "speak",
          "content": "您的退货申请已受理，我们会尽快为您处理。如需其他帮助请继续说明。"
        },
        {
          "type": "upgrate",
          "field": "status",
          "value": "已退货"
        },
        {
          "type": "middle"
        }
      ],
      "branch": {},
      "if": [
        {
          "condition": "$status == '已退货'",
          "goto": "alreadyRefund"
        }
      ]
    },
    "exchangeProc": {
      "name": "exchangeProc",
      "actions": [
        {
          "type": "speak",
          "content": "您的换货申请已受理，我们会尽快为您安排。"
        },
        {
          "type": "upgrate",
          "field": "status",
          "value": "已换货"
        },
        {
          "type": "middle"
        }
      ],
      "branch": {},
      "if": [
        {
          "condition": "$status == '已换货'",
          "goto": "alreadyExchanged"
        }
      ]
    },
    "alreadyRefund": {
      "name": "alreadyRefund",
      "actions": [
        {
          "type": "speak",
          "content": "您的订单已经完成退货，无需重复操作。"
        },
        {
          "type": "middle"
        }
      ],
      "branch": {}
    },
    "alreadyExchanged": {
      "name": "alreadyExchanged",
      "actions": [
        {
          "type": "speak",
          "content": "您的订单已经完成换货，无需重复操作。如需其他帮助请说明。"
        },
        {
          "type": "middle"
        }
      ],
      "branch": {}
    },
    "complainProc": {
      "name": "complainProc",
      "actions": [
        {
          "type": "speak",
          "content": "很抱歉给您带来不便，请描述您的投诉内容，我们会尽快处理。如需退货或换货也可直接说明。"
        },
        {
          "type": "listen",
          "min": 5,
          "max": 50
        },
        {
          "type": "upgrate",
          "field": "compain",
          "value": "$listen_content"
        },
        {
          "type": "speak",
          "content": "感谢您的反馈，您的投诉内容我们会尽快受理"
        },
        {
          "type": "middle"
        }
      ],
      "branch": {}
    },
    "humanProc": {
      "name": "humanProc",
      "actions": [
        {
          "type": "speak",
          "content": "正在为您转接人工客服..."
        },
        {
          "type": "middle"
        }
      ],
      "branch": {}
    },
    "fail": {
      "name": "fail",
      "actions": [
        {
          "type": "speak",
          "content": "没有听清您的需求，请您再说一遍好吗？您可以说订单、退货、换货、投诉、人工或退出。"
        },
        {
          "type": "listen",
          "min": 5,
          "max": 20
        }
      ],
      "branch": {
        "订单": "orderProc",
        "退货": "returnProc",
        "换货": "exchangeProc",
        "投诉": "complainProc",
        "人工": "humanProc",
        "意图识别失败": "fail",
        "结束": "exit"
      }
    },
    "exit": {
      "name": "exit",
      "actions": [
        {
          "type": "speak",
          "content": "感谢您的来电，祝您生活愉快，再见！"
        }
      ],
      "branch": {}
    }
  }
}